#!/bin/bash
# ReactOS BuildBot Build Scripts for Linux
# regtestcd - Enable optional and rostests modules and build a bootcdregtest.
#
# Parameter $1 (optional) - If a revision is given here, collect this Test-CD under this revision number
source ../../config.inc

cp -R ../../deps modules/optional || exit $?
mv -v modules/rostests_disabled modules/rostests || exit $?

../../configure || exit $?
../../build_reactos bootcdregtest || exit $?

if [ "$1" != "" ]; then
	# FIXME: Make this path configurable
	mv $ROS_OUTPUT/reactos/bootcdregtest.iso ../../dbgtest_cmake/isos/bootcdregtest-$1.iso
fi

exit 0
