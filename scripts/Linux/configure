#!/bin/bash
# ReactOS BuildBot Build Scripts for Linux
# configure - Set up the environment for building and let CMake generate build files.
source ../../config.inc

$TIME bash -c "(
	mkdir -p $CCACHE_DIR
	ccache -M 4G
	mkdir -p $ROS_OUTPUT
	cd $ROS_OUTPUT
	mkdir -p host-tools
	mkdir -p reactos

	cd host-tools
	rm -f CMakeCache.txt
	cmake -G 'Ninja' -DARCH=$ROS_ARCH $SOURCEDIR

	cd ../reactos
	rm -f CMakeCache.txt
	cmake -G 'Ninja' -DENABLE_CCACHE=1 -DPCH=0 -DUSE_PSEH3=1 -DCMAKE_TOOLCHAIN_FILE=toolchain-gcc.cmake -DARCH=$ROS_ARCH -DREACTOS_BUILD_TOOLS_DIR=$ROS_OUTPUT/host-tools $SOURCEDIR
)"
